-- Generated by Oracle SQL Developer Data Modeler 4.0.0.833
--   at:        2014-01-20 00:33:56 EET
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g

USE HRM;

CREATE TABLE Certificates
  (
    Id       INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    Name     VARCHAR (100) NOT NULL ,
    VendorId INTEGER NOT NULL
  )
   ;

CREATE TABLE Departments
  (
    Id       INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    Name     VARCHAR (50) NOT NULL ,
    ParentId INTEGER
  )
   ;

CREATE TABLE Employee_Certificates
  (
    Id            INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    EmployeeId    INTEGER NOT NULL ,
    CertificateId INTEGER NOT NULL ,
    IssueId       INTEGER ,
    IssueDate     DATE NOT NULL
  )
   ;

CREATE TABLE Employee_Skills
  (
    Id         INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    EmployeeId INTEGER NOT NULL ,
    SkillId    INTEGER NOT NULL
  )
   ;

CREATE TABLE Employees
  (
    Name         VARCHAR (100) NOT NULL ,
    Id           INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    TitleId      INTEGER NOT NULL ,
    DepartmentId INTEGER NOT NULL ,
    Email        VARCHAR (254) NOT NULL ,
    Phone        VARCHAR (20) NOT NULL ,
    Salary       INTEGER NOT NULL ,
    CV BLOB ,
    HireDate   DATE NOT NULL ,
    EndDate    DATE ,
    ReferrerId INTEGER ,
    ManagerId  INTEGER
  )
   ;
ALTER TABLE Employees ADD CONSTRAINT Employees__UN UNIQUE ( Email ) ;

CREATE TABLE Interviews
  (
    Id              INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    InterviewerId   INTEGER NOT NULL ,
    CandidateId     INTEGER NOT NULL ,
    DateInterviewed DATE NOT NULL ,
    Score           INTEGER NOT NULL ,
    Notes           VARCHAR (1000)
  )
   ;
ALTER TABLE Interviews ADD CONSTRAINT Score_Constraint CHECK ( Score BETWEEN 1 AND 10) ;

CREATE TABLE Job_Candidates
  (
    Id            INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    Name          VARCHAR (100) NOT NULL ,
    Phone         VARCHAR (20) ,
    Email         VARCHAR (254) ,
    JobPositionId INTEGER NOT NULL ,
    ReferrerId    INTEGER ,
    TotalScore    INTEGER ,
    CV BLOB
  )
   ;
ALTER TABLE Job_Candidates ADD CONSTRAINT Interview_Score_Range CHECK ( TotalScore BETWEEN 1 AND 10) ;

CREATE TABLE Job_Positions
  (
    Id          INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    TitleId     INTEGER NOT NULL ,
    Description VARCHAR(1000)
  )
   ;

CREATE TABLE Skills
  (
    Id   INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    Name VARCHAR (100) NOT NULL
  )
   ;

CREATE TABLE Titles
  (
    Id       INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    ALIAS    VARCHAR (20) NOT NULL ,
    Name     VARCHAR (50) NOT NULL ,
    ParentId INTEGER
  )
   ;

CREATE TABLE Vacations
  (
    Id          INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    EmployeeId  INTEGER NOT NULL ,
    Status      VARCHAR (10) DEFAULT 'PENDING' NOT NULL ,
    RequestDate DATE NOT NULL ,
    FromDate    DATE NOT NULL ,
    ToDate      DATE NOT NULL
  )
   ;
ALTER TABLE Vacations ADD CONSTRAINT Vacation_Status_Constraint CHECK ( Status IN ('APPROVED', 'DECLINED', 'PENDING')) ;

CREATE TABLE Vendors
  (
    Id   INTEGER AUTO_INCREMENT NOT NULL PRIMARY KEY,
    Name VARCHAR (100) NOT NULL
  )
   ;

ALTER TABLE Certificates ADD CONSTRAINT Certificates_Vendors_FK FOREIGN KEY ( VendorId ) REFERENCES Vendors ( Id )  ;

ALTER TABLE Departments ADD CONSTRAINT Deparment_Deparment_FK FOREIGN KEY ( ParentId ) REFERENCES Departments ( Id )  ;

ALTER TABLE Employee_Certificates ADD CONSTRAINT Emp_Cert_Cert_FK FOREIGN KEY ( CertificateId ) REFERENCES Certificates ( Id )  ;

ALTER TABLE Employee_Certificates ADD CONSTRAINT Emp_Cert_Empl_FK FOREIGN KEY ( EmployeeId ) REFERENCES Employees ( Id )  ;

ALTER TABLE Employee_Skills ADD CONSTRAINT Empl_Skills_Emp_FK FOREIGN KEY ( EmployeeId ) REFERENCES Employees ( Id )  ;

ALTER TABLE Employee_Skills ADD CONSTRAINT Employee_Skills_Skills_FK FOREIGN KEY ( SkillId ) REFERENCES Skills ( Id )  ;

ALTER TABLE Employees ADD CONSTRAINT Employees_Deparment_FK FOREIGN KEY ( DepartmentId ) REFERENCES Departments ( Id )  ;

ALTER TABLE Employees ADD CONSTRAINT Employees_Employees_FK FOREIGN KEY ( ReferrerId ) REFERENCES Employees ( Id )  ;

ALTER TABLE Employees ADD CONSTRAINT Employees_Employees_FKv1 FOREIGN KEY ( ManagerId ) REFERENCES Employees ( Id )  ;

ALTER TABLE Employees ADD CONSTRAINT Employees_Titles_FK FOREIGN KEY ( TitleId ) REFERENCES Titles ( Id )  ;

ALTER TABLE Interviews ADD CONSTRAINT Int_Job_Cand_FK FOREIGN KEY ( CandidateId ) REFERENCES Job_Candidates ( Id )  ;

ALTER TABLE Interviews ADD CONSTRAINT Interviews_Employees_FK FOREIGN KEY ( InterviewerId ) REFERENCES Employees ( Id )  ;

ALTER TABLE Job_Candidates ADD CONSTRAINT JobCandidates_JobPositions_FK FOREIGN KEY ( JobPositionId ) REFERENCES Job_Positions ( Id )  ;

ALTER TABLE Job_Positions ADD CONSTRAINT JobPositions_Titles_FK FOREIGN KEY ( TitleId ) REFERENCES Titles ( Id )  ;

ALTER TABLE Job_Candidates ADD CONSTRAINT Job_Cand_Emp_FK FOREIGN KEY ( ReferrerId ) REFERENCES Employees ( Id )  ;

ALTER TABLE Titles ADD CONSTRAINT Titles_Titles_FK FOREIGN KEY ( ParentId ) REFERENCES Titles ( Id )  ;

ALTER TABLE Vacations ADD CONSTRAINT Vac_Emp_FK FOREIGN KEY ( EmployeeId ) REFERENCES Employees ( Id )  ;
